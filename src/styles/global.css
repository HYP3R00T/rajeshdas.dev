@import "tailwindcss";
@import "plyr/dist/plyr.css";

@custom-variant dark (&:is(.dark *));

:root {
  --radius: 0.5rem;

  /* Background Layers - Revamp: Pure Black Theme */
  --background-0: hsl(0, 0%, 0%); /* pure black */
  --background-1: hsl(0, 0%, 5%); /* pure black */
  --background-2: hsl(0, 0%, 10%); /* very dark gray for contrast */

  /* Text - Revamp: White with gray variants */
  --foreground-0: hsl(0, 0%, 100%); /* primary text */
  --foreground-1: hsl(0, 0%, 80%); /* secondary text */
  --foreground-2: hsl(0, 0%, 60%); /* muted / meta text */
  --foreground-3: hsl(0, 0%, 40%); /* subtle text / numbers */

  /* Accent - Revamp: White only */
  --accent: hsl(0, 0%, 100%);
  --accent-fg: hsl(0, 0%, 0%);

  /* Borders */
  --border: hsl(0, 0%, 10%);

  /* Colors */
  --red: hsl(0, 65%, 62%);
  --orange: hsl(30, 70%, 60%);
  --yellow: hsl(45, 75%, 65%);
  --green: hsl(130, 40%, 55%);
  --teal: hsl(165, 45%, 53%);
  --cyan: hsl(185, 50%, 60%);
  --blue: hsl(210, 70%, 63%);
  --purple: hsl(270, 60%, 65%);
  --pink: hsl(330, 65%, 67%);

  /* Astro Code Theme */
  --astro-code-background: var(--background-1);
  --astro-code-foreground: var(--foreground-1);
  --astro-code-token-constant: var(--pink);
  --astro-code-token-string: var(--green);
  --astro-code-token-comment: var(--foreground-2);
  --astro-code-token-keyword: var(--pink);
  --astro-code-token-parameter: var(--red);
  --astro-code-token-function: var(--blue);
  --astro-code-token-string-expression: var(--green);
  --astro-code-token-punctuation: var(--red);
  --astro-code-token-link: var(--green);

  /* Plyr theme */
  --plyr-color-main: var(--accent);
}

@theme inline {
  /* Radii */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* Core */
  --color-background-0: var(--background-0);
  --color-background-1: var(--background-1);
  --color-background-2: var(--background-2);
  --color-foreground-0: var(--foreground-0);
  --color-foreground-1: var(--foreground-1);
  --color-foreground-2: var(--foreground-2);
  --color-foreground-3: var(--foreground-3);
  --color-accent: var(--accent);
  --color-accent-fg: var(--accent-fg);
  --color-border: var(--border);

  /* Named colors */
  --color-red: var(--red);
  --color-orange: var(--orange);
  --color-yellow: var(--yellow);
  --color-green: var(--green);
  --color-cyan: var(--cyan);
  --color-blue: var(--blue);
  --color-purple: var(--purple);
  --color-pink: var(--pink);

  --aspect-retro: 4 / 3;

  /* font */
  --font-display: "Space Grotesk Variable", sans-serif;
  --font-mono: "JetBrains Mono Variable", monospace;
  --font-sans: "Inter Variable", sans-serif;
}

@layer base {
  * {
    @apply border-border scroll-smooth;
  }

  body {
    @apply bg-background-0 text-foreground-0 font-mono;
  }

  ::selection {
    @apply bg-foreground-0 text-background-0;
  }

  ::-webkit-scrollbar {
    @apply h-2 w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-background-2;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-accent;
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    @apply cursor-pointer;
  }

  .prose {
    @apply text-foreground-1 w-full max-w-none font-mono;
  }

  .prose a {
    @apply text-accent decoration-accent relative font-medium underline underline-offset-4 transition-colors;
  }

  .prose a:hover {
    @apply text-accent decoration-accent;
  }

  .prose h1 {
    @apply text-foreground-0 font-display mt-0 mb-6 text-5xl leading-tight font-extrabold tracking-tight;
  }

  .prose h2 {
    @apply text-foreground-0 font-display mt-12 mb-4 text-4xl leading-snug font-bold tracking-tight;
  }

  .prose h3 {
    @apply text-foreground-0 font-display mt-10 mb-3 text-2xl leading-snug font-semibold;
  }

  .prose h4 {
    @apply text-foreground-0 font-display mt-8 mb-2 text-xl font-semibold;
  }

  .prose h5 {
    @apply text-foreground-2 mt-6 mb-1 text-base font-semibold tracking-wide uppercase;
  }

  .prose h6 {
    @apply text-foreground-2 mt-6 mb-1 text-sm font-semibold tracking-wide uppercase;
  }

  .prose p {
    @apply my-6 font-sans;
  }

  .prose p:first-child {
    @apply mt-0;
  }

  .prose ul,
  .prose ol {
    @apply my-6 space-y-2;
  }

  .prose ul {
    @apply list-disc pl-6;
  }

  .prose ol {
    @apply list-decimal pl-6;
  }

  .prose li {
    @apply font-sans leading-relaxed;
  }

  .prose blockquote {
    @apply border-accent bg-background-2 text-foreground-0 my-8 border-l-4 px-6 py-4;
  }

  .prose blockquote p {
    @apply my-0;
  }

  .prose blockquote h2,
  .prose blockquote h3,
  .prose blockquote h4,
  .prose blockquote h5 {
    @apply mt-0;
  }

  .prose code {
    @apply bg-background-2 px-1.5 py-0.5 font-mono text-base font-medium;
  }

  .prose pre code {
    @apply bg-transparent p-0 text-inherit;
  }

  .prose pre {
    @apply bg-background-2 my-8 overflow-x-auto px-6 py-5 text-base leading-relaxed;
  }

  .astro-code {
    @apply bg-background-2 my-8 px-6 py-5 font-mono text-base;
  }

  .prose table {
    @apply my-8 w-full border-collapse font-sans text-base;
  }

  .prose th {
    @apply border-border border-b px-4 py-3 text-left font-semibold;
  }

  .prose td {
    @apply border-border border-b px-4 py-3 align-top;
  }

  .prose tr:last-child td {
    @apply border-b-0;
  }

  .prose img {
    @apply my-8;
  }

  .prose iframe {
    @apply my-8 aspect-video w-full;
  }

  .prose hr {
    @apply border-border my-12;
  }
}

html.dark .astro-code,
html.dark .astro-code span {
  color: var(--astro-code-foreground) !important;
  background-color: var(--astro-code-background) !important;
}

/* Stripe Patterns */
.stripe-pattern {
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 10px,
    hsl(0, 0%, 2%) 10px,
    hsl(0, 0%, 2%) 20px
  );
}

.stripe-pattern-dense {
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 2px,
    hsl(0, 0%, 2%) 2px,
    hsl(0, 0%, 2%) 4px
  );
}

/* Typography Utility Classes */
@layer utilities {
  .text-section-heading {
    @apply text-foreground-0 mb-8 text-left font-mono text-[clamp(3rem,10vw,7rem)] leading-[0.9] font-bold tracking-tighter uppercase;
  }
}
