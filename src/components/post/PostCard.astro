---
import { formatDate } from "@/lib/utils";
import { Icon } from "astro-icon/components";
import Button from "@/components/ui/Button.astro";

const { post } = Astro.props;
---

<div class="group text-text-default relative h-full bg-transparent">
  <a href={`/post/${post.id}/`} class="relative block">
    <div
      class="before:bg-content relative overflow-hidden text-xl before:absolute before:inset-0 before:-z-10 before:origin-right before:scale-x-0 before:transition-transform before:duration-300 before:ease-in-out hover:bg-transparent! hover:before:origin-left hover:before:scale-x-100"
    >
      <!-- Content -->
      <div class="relative z-10 mt-6 space-y-4 p-4">
        <!-- Date -->
        <div
          class="text-cyan flex w-full flex-row items-center justify-center gap-2 text-lg"
          transition:name={`${post.data.title}-date`}
        >
          <div class="relative h-2 w-48">
            <div
              class="bg-cyan absolute left-0 h-0.5 w-32 translate-y-full"
              data-collapsed="false"
            >
            </div>

            <div
              class="bg-cyan absolute h-2 w-16 translate-y-1/2"
              style="clip-path: polygon(0 0, 100% 0, 80% 100%, 0% 100%);"
              data-collapsed="false"
            >
            </div>
          </div>
          <div class="text-cyan w-full font-bold">
            {formatDate(post.data.pubDatetime)}
          </div>
        </div>

        <!-- Title -->
        <div>
          <h1
            class="text-2xl leading-tight font-bold"
            transition:name={post.data.title}
          >
            {post.data.title}
          </h1>
        </div>

        <!-- Description -->
        <div class="">
          <p class="text-text-subtle text-lg leading-tight">
            {post.data.description}
          </p>
        </div>

        <!-- Footer (Read link + duration) -->
        <div class="flex items-center justify-between text-sm">
          <Button
            variant="ghost"
            class="text-cyan! before:bg-cyan/30 relative overflow-hidden text-xl before:absolute before:inset-0 before:-z-10 before:origin-right before:scale-x-0 before:transition-transform before:duration-300 before:ease-in-out hover:bg-transparent! hover:before:origin-left hover:before:scale-x-100"
          >
            <div class="flex flex-row items-center gap-4">
              <Icon name="arrow-up" class="rotate-90" } />
              Read article
            </div>
          </Button>
        </div>
      </div>
    </div>
  </a>
</div>
