---
import { formatDate } from "@/lib/utils";
import CardBg from "@/assets/card-bg.jpg";
import { Image } from "astro:assets";
import Badge from "@/components/ui/Badge.astro";

const { post, class: className, ...attrs } = Astro.props;
---

<article
  class={`${className ?? ""} group border-border relative overflow-hidden rounded-xl border mb-8`}
  {...attrs}
>
  <a href={`/post/${post.id}/`} class="block h-full">
    <div class="relative h-full">
      <Image
        src={CardBg}
        alt={post.data.coverAlt ?? post.data.title}
        class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
      />
      <div
        class="from-background via-background/90 to-background/40 absolute inset-0 bg-linear-to-t"
      >
      </div>

      <div class="relative flex h-full flex-col justify-end p-6 text-white">
        <div class="mb-3 flex items-center gap-3">
          <Badge variant="accent">Featured</Badge>
          <time
            class="text-text-subtle text-xs font-medium tracking-wide uppercase"
          >
            {formatDate(post.data.pubDatetime)}
          </time>
        </div>

        <h2
          class="text-text-default mb-2 text-2xl leading-tight font-bold md:text-3xl"
        >
          {post.data.title}
        </h2>

        <p class="text-text-subtle mb-4 line-clamp-3 text-base leading-relaxed">
          {post.data.description}
        </p>
      </div>
    </div>
  </a>
</article>
