---
// Contact Section Component
// Displays contact form and contact information with social links
import { Icon } from "astro-icon/components";
import { footerSocialLinks } from "@data/config";
import type { FooterSocialLink } from "@/lib/types";
---

<section class="stripe-pattern relative bg-black px-6 py-32 md:px-12">
  <div class="mx-auto max-w-7xl">
    <div class="mb-20">
      <div class="text-section-label mb-4">Get In Touch</div>
      <h2 class="text-section-heading text-foreground-0 mb-8">
        LET'S WORK<br />TOGETHER
      </h2>
      <p
        class="text-foreground-1 max-w-2xl text-sm tracking-wide uppercase md:text-base"
      >
        Open to DevOps consulting, infrastructure projects, and automation
        opportunities
      </p>
    </div>

    <div class="grid gap-16 lg:grid-cols-2">
      {/* Contact Form */}
      <form class="space-y-8">
        <div>
          <label for="name" class="text-section-label mb-3 block"> Name </label>
          <input
            type="text"
            id="name"
            name="name"
            class="border-border-strong placeholder:text-background-input text-foreground-0 focus:border-foreground-0 w-full border bg-transparent px-4 py-4 text-sm transition-colors focus:outline-none"
            placeholder="Your name"
            required
          />
        </div>

        <div>
          <label for="email" class="text-section-label mb-3 block">
            Email
          </label>
          <input
            type="email"
            id="email"
            name="email"
            class="border-border-strong placeholder:text-background-input text-foreground-0 focus:border-foreground-0 w-full border bg-transparent px-4 py-4 text-sm transition-colors focus:outline-none"
            placeholder="you@example.com"
            required
          />
        </div>

        <div>
          <label for="message" class="text-section-label mb-3 block">
            Message
          </label>
          <textarea
            id="message"
            name="message"
            rows={6}
            class="border-border-strong placeholder:text-background-input text-foreground-0 focus:border-foreground-0 w-full resize-none border bg-transparent px-4 py-4 text-sm transition-colors focus:outline-none"
            placeholder="Tell me about your project..."
            required></textarea>
        </div>

        <button
          type="submit"
          class="border-foreground-0 bg-foreground-0 hover:text-foreground-0 w-full border px-8 py-4 text-xs font-medium tracking-wider text-black uppercase transition-colors hover:bg-black"
        >
          Send Message
        </button>
      </form>

      {/* Contact Info */}
      <div class="space-y-12">
        {/* Email */}
        <div class="border-border border p-8">
          <div class="text-section-label mb-4">Email</div>
          <a
            href="mailto:hello@rajeshdas.dev"
            class="hover:text-foreground-1 text-foreground-0 text-xl break-all transition-colors"
          >
            hello@rajeshdas.dev
          </a>
        </div>

        {/* Social Links */}
        <div class="border-border border p-8">
          <div class="text-section-label mb-6">Connect</div>
          <div class="grid grid-cols-2 gap-4">
            {
              footerSocialLinks.map((link: FooterSocialLink) => (
                <a
                  href={link.href}
                  target={link.name !== "email" ? "_blank" : undefined}
                  rel={
                    link.name !== "email" ? "noopener noreferrer" : undefined
                  }
                  class="border-border-strong hover:bg-foreground-0 border p-4 transition-colors hover:text-black"
                  title={link.linkTitle}
                >
                  <Icon name={link.name} class="size-6" />
                </a>
              ))
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Form submission handler
  const form = document.querySelector("form");
  if (form) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const data = {
        name: formData.get("name"),
        email: formData.get("email"),
        message: formData.get("message"),
      };

      // Log form data (in production, would send to API or email service)
      console.log("Form submission:", data);

      // Show success message
      const button = form.querySelector('button[type="submit"]');
      if (button) {
        const originalText = button.textContent;
        button.textContent = "Message Sent!";
        (button as HTMLElement).style.backgroundColor = "transparent";
        (button as HTMLElement).style.color = "white";

        // Reset form
        form.reset();

        // Reset button after 3 seconds
        setTimeout(() => {
          button.textContent = originalText;
          (button as HTMLElement).style.backgroundColor = "white";
          (button as HTMLElement).style.color = "black";
        }, 3000);
      }
    });
  }
</script>
