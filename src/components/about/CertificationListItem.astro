---
import { Icon } from "astro-icon/components";

interface Props {
  title: string;
  provider: string;
  providerLogo?: string;
  badgeImage?: string;
  date: string;
  credlyBadgeUrl?: string;
  certificateUrl: string;
  showBorder?: boolean;
}

const {
  title,
  provider,
  providerLogo,
  badgeImage,
  date,
  credlyBadgeUrl,
  certificateUrl,
  showBorder = true,
} = Astro.props;
---

<div
  class={`flex items-start gap-4 py-3 ${showBorder ? "border-t border-border" : ""}`}
>
  {/* Badge Image (smaller) */}
  {
    badgeImage ? (
      <a
        href={credlyBadgeUrl || certificateUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="shrink-0"
      >
        <img
          src={badgeImage}
          alt={title}
          class="h-12 w-12 object-contain transition-transform hover:scale-105"
        />
      </a>
    ) : (
      <div class="bg-elevated flex h-12 w-12 shrink-0 items-center justify-center rounded">
        <Icon name="github" class="text-cyan h-6 w-6 opacity-50" />
      </div>
    )
  }

  {/* Content */}
  <div class="min-w-0 flex-1">
    <div class="flex items-start justify-between gap-3">
      <div class="min-w-0 flex-1">
        <h4 class="text-text-default text-sm leading-tight font-semibold">
          {title}
        </h4>
        <div class="mt-1 flex items-center gap-2">
          {
            providerLogo && (
              <img
                src={providerLogo}
                alt={provider}
                class="h-4 w-auto object-contain opacity-60"
              />
            )
          }
          <span class="text-text-subtle text-xs">
            {provider} â€¢ {date}
          </span>
        </div>
      </div>
    </div>

    {/* Links */}
    <div class="mt-2 flex flex-wrap gap-3">
      <a
        href={certificateUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="text-cyan inline-flex items-center gap-1 text-xs hover:underline"
      >
        <Icon name="external-link" class="h-3 w-3" />
        View Certificate
      </a>
      {
        credlyBadgeUrl && (
          <a
            href={credlyBadgeUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="text-text-subtle hover:text-cyan inline-flex items-center gap-1 text-xs hover:underline"
          >
            <Icon name="github" class="h-3 w-3" />
            Credly
          </a>
        )
      }
    </div>
  </div>
</div>
